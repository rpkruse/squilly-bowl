import{b as ae,c as le,d as ce,e as de,f as W,g as k,h as Le}from"./chunk-KU6TSRC2.js";import{c as oe}from"./chunk-QCCQDJFV.js";import{g as $,h as se,i as A,m as re,n as O,o as f,p as j}from"./chunk-XO22TBRP.js";import{$ as P,Aa as X,Ba as b,Ca as Fe,E as Ne,Ea as be,Fa as Se,Ga as h,Ha as B,Ja as Ae,Ka as w,La as L,M as G,Ma as N,Na as x,Oa as c,Pa as a,Qa as D,R as Z,Ra as F,S as xe,Sa as Q,Ua as S,V as ke,Va as g,Wa as u,X as _,Xa as C,Ya as H,Z as M,Za as ee,_ as Pe,_a as V,ba as R,ca as E,cb as I,db as Ue,e as q,eb as te,fb as ie,gb as ne,h as me,ia as Be,j as Ce,l as Oe,sa as ve,v as Me,w as Re,x as Ee,xa as l,y as Ie,ya as T,za as ye}from"./chunk-XWLULYOL.js";function ue(n){n||(Be(ue),n=_(X));let i=new q(o=>n.onDestroy(o.next.bind(o)));return o=>o.pipe(G(i))}var He={animation:!0,transitionTimerDelayMs:5},Ve=(()=>{let i=class i{constructor(){this.animation=He.animation}};i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=Z({token:i,factory:i.\u0275fac,providedIn:"root"});let n=i;return n})(),Xe=(()=>{let i=class i{constructor(){this._ngbConfig=_(Ve),this.closeOthers=!1,this.destroyOnHide=!0}get animation(){return this._animation??this._ngbConfig.animation}set animation(e){this._animation=e}};i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=Z({token:i,factory:i.\u0275fac,providedIn:"root"});let n=i;return n})();function et(n){let{transitionDelay:i,transitionDuration:o}=window.getComputedStyle(n),e=parseFloat(i),t=parseFloat(o);return(e+t)*1e3}function tt(n){return typeof n=="string"}function it(n){return(n||document.body).getBoundingClientRect()}function nt(n){return i=>new q(o=>{let e=r=>n.run(()=>o.next(r)),t=r=>n.run(()=>o.error(r)),s=()=>n.run(()=>o.complete());return i.subscribe({next:e,error:t,complete:s})})}var st=()=>{},{transitionTimerDelayMs:ot}=He,he=new Map,rt=(n,i,o,e)=>{let t=e.context||{},s=he.get(i);if(s)switch(e.runningTransition){case"continue":return Ce;case"stop":n.run(()=>s.transition$.complete()),t=Object.assign(s.context,t),he.delete(i)}let r=o(i,e.animation,t)||st;if(!e.animation||window.getComputedStyle(i).transitionProperty==="none")return n.run(()=>r()),Oe(void 0).pipe(nt(n));let d=new me,m=new me,y=d.pipe(Ne(!0));he.set(i,{transition$:d,complete:()=>{m.next(),m.complete()},context:t});let p=et(i);return n.runOutsideAngular(()=>{let v=Me(i,"transitionend").pipe(G(y),Ee(({target:K})=>K===i)),z=Re(p+ot).pipe(G(y));Ie(z,v,m).pipe(G(y)).subscribe(()=>{he.delete(i),n.run(()=>{r(),d.next(),d.complete()})})}),d.asObservable()};function at(n,i){if(typeof navigator>"u")return"0px";let{classList:o}=n,e=o.contains("show");e||o.add("show"),n.style[i]="";let t=n.getBoundingClientRect()[i]+"px";return e||o.remove("show"),t}var lt=(n,i,o)=>{let{direction:e,maxSize:t,dimension:s}=o,{classList:r}=n;function d(){r.add("collapse"),e==="show"?r.add("show"):r.remove("show")}if(!i){d();return}return t||(t=at(n,s),o.maxSize=t,n.style[s]=e!=="show"?t:"0px",r.remove("collapse"),r.remove("collapsing"),r.remove("show"),it(n),r.add("collapsing")),n.style[s]=e==="show"?t:"0px",()=>{d(),r.remove("collapsing"),n.style[s]=""}},ct=(()=>{let i=class i{constructor(){this._ngbConfig=_(Ve),this.horizontal=!1}get animation(){return this._animation??this._ngbConfig.animation}set animation(e){this._animation=e}};i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=Z({token:i,factory:i.\u0275fac,providedIn:"root"});let n=i;return n})(),Ge=(()=>{let i=class i{constructor(){this._config=_(ct),this._element=_(ve),this._zone=_(Fe),this.animation=this._config.animation,this._afterInit=!1,this._isCollapsed=!1,this.ngbCollapseChange=new b,this.horizontal=this._config.horizontal,this.shown=new b,this.hidden=new b}set collapsed(e){this._isCollapsed!==e&&(this._isCollapsed=e,this._afterInit&&this._runTransitionWithEvents(e,this.animation))}ngOnInit(){this._runTransition(this._isCollapsed,!1),this._afterInit=!0}toggle(e=this._isCollapsed){this.collapsed=!e,this.ngbCollapseChange.next(this._isCollapsed)}_runTransition(e,t){return rt(this._zone,this._element.nativeElement,lt,{animation:t,runningTransition:"stop",context:{direction:e?"hide":"show",dimension:this.horizontal?"width":"height"}})}_runTransitionWithEvents(e,t){this._runTransition(e,t).subscribe(()=>{e?this.hidden.emit():this.shown.emit()})}};i.\u0275fac=function(t){return new(t||i)},i.\u0275dir=P({type:i,selectors:[["","ngbCollapse",""]],hostVars:2,hostBindings:function(t,s){t&2&&B("collapse-horizontal",s.horizontal)},inputs:{animation:"animation",collapsed:["ngbCollapse","collapsed"],horizontal:"horizontal"},outputs:{ngbCollapseChange:"ngbCollapseChange",shown:"shown",hidden:"hidden"},exportAs:["ngbCollapse"],standalone:!0});let n=i;return n})(),dt=0,$e=(()=>{let i=class i{constructor(){this._vcr=_(Ae),this._element=_(ve).nativeElement,this._item=_(U),this._viewRef=null}ngAfterContentChecked(){this._bodyTpl&&(this._item._shouldBeInDOM?this._createViewIfNotExists():this._destroyViewIfExists())}ngOnDestroy(){this._destroyViewIfExists()}_destroyViewIfExists(){this._viewRef&&(this._viewRef.destroy(),this._viewRef=null)}_createViewIfNotExists(){if(!this._viewRef){this._viewRef=this._vcr.createEmbeddedView(this._bodyTpl),this._viewRef.detectChanges();for(let e of this._viewRef.rootNodes)this._element.appendChild(e)}}};i.\u0275fac=function(t){return new(t||i)},i.\u0275dir=P({type:i,selectors:[["","ngbAccordionBody",""]],contentQueries:function(t,s,r){if(t&1&&ie(r,Ue,7),t&2){let d;te(d=ne())&&(s._bodyTpl=d.first)}},hostVars:2,hostBindings:function(t,s){t&2&&B("accordion-body",!0)},standalone:!0});let n=i;return n})(),Te=(()=>{let i=class i{constructor(){this.item=_(U),this.ngbCollapse=_(Ge)}};i.\u0275fac=function(t){return new(t||i)},i.\u0275dir=P({type:i,selectors:[["","ngbAccordionCollapse",""]],hostAttrs:["role","region"],hostVars:4,hostBindings:function(t,s){t&2&&(Q("id",s.item.collapseId),Se("aria-labelledby",s.item.toggleId),B("accordion-collapse",!0))},exportAs:["ngbAccordionCollapse"],standalone:!0,features:[be([Ge])]});let n=i;return n})(),ut=(()=>{let i=class i{constructor(){this.item=_(U),this.accordion=_(pe)}};i.\u0275fac=function(t){return new(t||i)},i.\u0275dir=P({type:i,selectors:[["","ngbAccordionToggle",""]],hostVars:5,hostBindings:function(t,s){t&1&&S("click",function(){return!s.item.disabled&&s.accordion.toggle(s.item.id)}),t&2&&(Q("id",s.item.toggleId),Se("aria-controls",s.item.collapseId)("aria-expanded",!s.item.collapsed),B("collapsed",s.item.collapsed))},standalone:!0});let n=i;return n})(),je=(()=>{let i=class i{constructor(){this.item=_(U)}};i.\u0275fac=function(t){return new(t||i)},i.\u0275dir=P({type:i,selectors:[["button","ngbAccordionButton",""]],hostAttrs:["type","button"],hostVars:3,hostBindings:function(t,s){t&2&&(Q("disabled",s.item.disabled),B("accordion-button",!0))},standalone:!0,features:[be([ut])]});let n=i;return n})(),We=(()=>{let i=class i{constructor(){this.item=_(U)}};i.\u0275fac=function(t){return new(t||i)},i.\u0275dir=P({type:i,selectors:[["","ngbAccordionHeader",""]],hostAttrs:["role","heading"],hostVars:4,hostBindings:function(t,s){t&2&&B("accordion-header",!0)("collapsed",s.item.collapsed)},standalone:!0});let n=i;return n})(),U=(()=>{let i=class i{constructor(){this._accordion=_(pe),this._cd=_(ye),this._destroyRef=_(X),this._collapsed=!0,this._id=`ngb-accordion-item-${dt++}`,this._collapseAnimationRunning=!1,this.disabled=!1,this.show=new b,this.shown=new b,this.hide=new b,this.hidden=new b}set id(e){tt(e)&&e!==""&&(this._id=e)}set destroyOnHide(e){this._destroyOnHide=e}get destroyOnHide(){return this._destroyOnHide===void 0?this._accordion.destroyOnHide:this._destroyOnHide}set collapsed(e){e?this.collapse():this.expand()}get collapsed(){return this._collapsed}get id(){return`${this._id}`}get toggleId(){return`${this.id}-toggle`}get collapseId(){return`${this.id}-collapse`}get _shouldBeInDOM(){return!this.collapsed||this._collapseAnimationRunning||!this.destroyOnHide}ngAfterContentInit(){let{ngbCollapse:e}=this._collapse;e.animation=!1,e.collapsed=this.collapsed,e.animation=this._accordion.animation,e.hidden.pipe(ue(this._destroyRef)).subscribe(()=>{this._collapseAnimationRunning=!1,this.hidden.emit(),this._accordion.hidden.emit(this.id)}),e.shown.pipe(ue(this._destroyRef)).subscribe(()=>{this.shown.emit(),this._accordion.shown.emit(this.id)})}toggle(){this.collapsed=!this.collapsed}expand(){if(this.collapsed){if(!this._accordion._ensureCanExpand(this))return;this._collapsed=!1,this._cd.markForCheck(),this._cd.detectChanges(),this.show.emit(),this._accordion.show.emit(this.id),this._collapse.ngbCollapse.animation=this._accordion.animation,this._collapse.ngbCollapse.collapsed=!1}}collapse(){this.collapsed||(this._collapsed=!0,this._collapseAnimationRunning=!0,this._cd.markForCheck(),this.hide.emit(),this._accordion.hide.emit(this.id),this._collapse.ngbCollapse.animation=this._accordion.animation,this._collapse.ngbCollapse.collapsed=!0)}};i.\u0275fac=function(t){return new(t||i)},i.\u0275dir=P({type:i,selectors:[["","ngbAccordionItem",""]],contentQueries:function(t,s,r){if(t&1&&ie(r,Te,7),t&2){let d;te(d=ne())&&(s._collapse=d.first)}},hostVars:3,hostBindings:function(t,s){t&2&&(Q("id",s.id),B("accordion-item",!0))},inputs:{id:["ngbAccordionItem","id"],destroyOnHide:"destroyOnHide",disabled:"disabled",collapsed:"collapsed"},outputs:{show:"show",shown:"shown",hide:"hide",hidden:"hidden"},exportAs:["ngbAccordionItem"],standalone:!0});let n=i;return n})(),pe=(()=>{let i=class i{constructor(){this._config=_(Xe),this._anItemWasAlreadyExpandedDuringInitialisation=!1,this.animation=this._config.animation,this.closeOthers=this._config.closeOthers,this.destroyOnHide=this._config.destroyOnHide,this.show=new b,this.shown=new b,this.hide=new b,this.hidden=new b}toggle(e){this._getItem(e)?.toggle()}expand(e){this._getItem(e)?.expand()}expandAll(){this._items&&(this.closeOthers?this._items.find(e=>!e.collapsed)||this._items.first.expand():this._items.forEach(e=>e.expand()))}collapse(e){this._getItem(e)?.collapse()}collapseAll(){this._items?.forEach(e=>e.collapse())}isExpanded(e){let t=this._getItem(e);return t?!t.collapsed:!1}_ensureCanExpand(e){return this.closeOthers?this._items?(this._items.find(t=>!t.collapsed&&e!==t)?.collapse(),!0):this._anItemWasAlreadyExpandedDuringInitialisation?!1:(this._anItemWasAlreadyExpandedDuringInitialisation=!0,!0):!0}_getItem(e){return this._items?.find(t=>t.id===e)}};i.\u0275fac=function(t){return new(t||i)},i.\u0275dir=P({type:i,selectors:[["","ngbAccordion",""]],contentQueries:function(t,s,r){if(t&1&&ie(r,U,4),t&2){let d;te(d=ne())&&(s._items=d)}},hostVars:2,hostBindings:function(t,s){t&2&&B("accordion",!0)},inputs:{animation:"animation",closeOthers:"closeOthers",destroyOnHide:"destroyOnHide"},outputs:{show:"show",shown:"shown",hide:"hide",hidden:"hidden"},exportAs:["ngbAccordion"],standalone:!0});let n=i;return n})();var ze=(()=>{let i=class i{};i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Pe({type:i}),i.\u0275inj=xe({});let n=i;return n})();var cn=(()=>{let n=()=>/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2,i=()=>/Android/.test(navigator.userAgent);return typeof navigator<"u"?!!navigator.userAgent&&(n()||i()):!1})();var dn=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");var un=new Date(1882,10,12),hn=new Date(2174,10,25);var pn=1e3*60*60*24;var we=1080,ht=24*we,pt=12*we+793,_n=29*ht+pt,fn=11*we+204;var gn=new ke("live announcer delay",{providedIn:"root",factory:()=>100});function ft(n,i){if(n&1&&(c(0,"div"),u(1),a()),n&2){let o=i.$implicit;l(1),ee(" ",o.name,": ",o.score," ")}}function gt(n,i){if(n&1&&N(0,ft,2,2,"div",null,L),n&2){let o=i.$implicit;x(o)}}function mt(n,i){if(n&1&&(c(0,"div"),u(1),a()),n&2){let o=i.$implicit;l(1),V(" ",o.firstPlayer.name,"/",o.secondPlayer.name,": ",o.score," ")}}function vt(n,i){if(n&1&&N(0,mt,2,3,"div",null,L),n&2){let o=i.$implicit;x(o)}}function yt(n,i){if(n&1&&(N(0,gt,2,0,null,null,L),N(2,vt,2,0,null,null,L)),n&2){let o=g().$implicit;x(o.players),l(2),x(o.teams)}}function bt(n,i){if(n&1&&(c(0,"div",4)(1,"h2",5)(2,"button",6),u(3),a()(),c(4,"div",7)(5,"div",8),w(6,yt,4,0,"ng-template"),a()()()),n&2){let o=i.$index,e=g();l(3),C(e.roundTitle(o))}}var fe=(()=>{let i=class i{set roundInfo(e){this._roundInfo=e;let t=this.storageService.getValue(f.ROUNDS);t&&(this._roundInfo=t)}get roundInfo(){return this._roundInfo}constructor(e){this.storageService=e}roundTitle(e){return j.roundTitles[e]}};i.\u0275fac=function(t){return new(t||i)(T(k))},i.\u0275cmp=M({type:i,selectors:[["app-stats"]],inputs:{roundInfo:"roundInfo"},standalone:!0,features:[I],decls:7,vars:1,consts:[[1,"card","h-100"],[1,"card-header","text-center"],[1,"card-body"],["ngbAccordion","",3,"closeOthers"],["ngbAccordionItem",""],["ngbAccordionHeader",""],["ngbAccordionButton",""],["ngbAccordionCollapse",""],["ngbAccordionBody",""]],template:function(t,s){t&1&&(c(0,"div",0)(1,"h5",1),u(2,"Round History"),a(),c(3,"div",2)(4,"div",3),N(5,bt,7,1,"div",4,L),a()()()),t&2&&(l(4),h("closeOthers",!0),l(1),x(s.roundInfo))},dependencies:[ze,je,pe,U,We,$e,Te]});let n=i;return n})();function Tt(n,i){if(n&1){let o=F();c(0,"div")(1,"div",11)(2,"div",12)(3,"span",13),u(4),a()(),c(5,"input",14),S("ngModelChange",function(t){let r=R(o).$implicit;return E(r.score=t)})("change",function(){R(o);let t=g();return E(t.saveRoundDataToStorage())}),a()()()}if(n&2){let o=i.$implicit;l(4),H("",o.name,"'s Score:"),l(1),h("ngModel",o.score)}}var Qe=(()=>{let i=class i{set round(e){this._round=e,this.currentGameIndex=0;let t=this.storageService.getValue(f.ROUNDS);t&&(this.roundInfo=t)}get round(){return this._round}constructor(e){this.storageService=e,this.roundTitle="",this.moveToNextRound=new b,this.currentGameIndex=0,this.roundInfo=[]}saveRoundDataToStorage(){let e=this.storageService.getValue(f.ROUNDS);e&&(e[this.roundIndex]=this.round,this.storageService.setValue(f.ROUNDS,e),this.roundInfo=e)}nextClicked(){this.saveRoundDataToStorage();let e=this.round.players?this.round.players.length-1:0;if(this.currentGameIndex>=e){this.moveToNextRound.emit(!0);return}this.currentGameIndex++}backClicked(){this.currentGameIndex<=0||this.currentGameIndex--}get nextSetOfPlayers(){return this.round.players&&this.round.players.length>0?this.round.players[this.currentGameIndex]:[]}get continueButtonText(){let e=this.round.players?this.round.players.length-1:0;return this.currentGameIndex>=e?"Next Round":"Next Set"}get backDisabled(){return this.currentGameIndex===0}get nextDisabled(){return this.round.players?this.round.players[this.currentGameIndex].some(e=>e.score<=-1||isNaN(e.score)||e.score===null||e.score===void 0):!0}};i.\u0275fac=function(t){return new(t||i)(T(k))},i.\u0275cmp=M({type:i,selectors:[["app-single-round"]],inputs:{round:"round",roundTitle:"roundTitle",roundIndex:"roundIndex"},outputs:{moveToNextRound:"moveToNextRound"},standalone:!0,features:[I],decls:16,vars:8,consts:[[1,"row"],[1,"col-6"],[3,"roundInfo"],[1,"card","h-100"],[1,"card-header","text-center"],[1,"card-body"],[1,"card-title","text-left"],[4,"ngFor","ngForOf"],[1,"card-footer"],["type","button",1,"btn","btn-primary",3,"disabled","click"],["type","button",1,"btn","btn-primary","float-end",3,"disabled","click"],[1,"input-group"],[1,"input-group-prepend","w-25"],[1,"fw-bold","input-group-text","w-100"],["type","number",1,"form-control",3,"ngModel","ngModelChange","change"]],template:function(t,s){t&1&&(c(0,"div",0)(1,"div",1),D(2,"app-stats",2),a(),c(3,"div",1)(4,"div",3)(5,"h5",4),u(6),a(),c(7,"div",5)(8,"h5",6),u(9,"The current players are:"),a(),w(10,Tt,6,2,"div",7),a(),c(11,"div",8)(12,"button",9),S("click",function(){return s.backClicked()}),u(13,"Back"),a(),c(14,"button",10),S("click",function(){return s.nextClicked()}),u(15),a()()()()()),t&2&&(l(2),h("roundInfo",s.roundInfo),l(4),V("",s.roundTitle,", Game ",s.currentGameIndex+1,"/",s.round.players.length,""),l(4),h("ngForOf",s.nextSetOfPlayers),l(2),h("disabled",s.backDisabled),l(2),h("disabled",s.nextDisabled),l(1),C(s.continueButtonText))},dependencies:[fe,A,$,W,ae,de,le,ce]});let n=i;return n})();function wt(n,i){if(n&1){let o=F();c(0,"div")(1,"div",11)(2,"div",12)(3,"span",13),u(4),a()(),c(5,"input",14),S("ngModelChange",function(t){let r=R(o).$implicit;return E(r.score=t)})("change",function(){R(o);let t=g();return E(t.saveRoundDataToStorage())}),a()()()}if(n&2){let o=i.$implicit;l(4),ee("",o.firstPlayer.name,"/",o.secondPlayer.name,"'s Score:"),l(1),h("ngModel",o.score)}}var Ye=(()=>{let i=class i{set round(e){this._round=e,this.currentGameIndex=0;let t=this.storageService.getValue(f.ROUNDS);t&&(this.roundInfo=t)}get round(){return this._round}constructor(e){this.storageService=e,this.roundTitle="",this.moveToNextRound=new b,this.currentGameIndex=0,this.roundInfo=[]}saveRoundDataToStorage(){let e=this.storageService.getValue(f.ROUNDS);e&&(e[this.roundIndex]=this.round,this.storageService.setValue(f.ROUNDS,e),this.roundInfo=e)}nextClicked(){this.saveRoundDataToStorage();let e=this.round.teams?this.round.teams.length-1:0;if(this.currentGameIndex>=e){this.moveToNextRound.emit(!0);return}this.currentGameIndex++}backClicked(){this.currentGameIndex<=0||this.currentGameIndex--}get nextSetOfTeams(){return this.round.teams&&this.round.teams.length>0?this.round.teams[this.currentGameIndex]:[]}get continueButtonText(){let e=this.round.teams?this.round.teams.length-1:0;return this.currentGameIndex>=e?"Next Round":"Next Set"}get backDisabled(){return this.currentGameIndex===0}get nextDisabled(){return this.round.teams?this.round.teams[this.currentGameIndex].some(e=>e.score<=-1||isNaN(e.score)||e.score===null||e.score===void 0):!0}};i.\u0275fac=function(t){return new(t||i)(T(k))},i.\u0275cmp=M({type:i,selectors:[["app-team-round"]],inputs:{round:"round",roundTitle:"roundTitle",roundIndex:"roundIndex"},outputs:{moveToNextRound:"moveToNextRound"},standalone:!0,features:[I],decls:16,vars:8,consts:[[1,"row"],[1,"col-6"],[3,"roundInfo"],[1,"card","h-100"],[1,"card-header","text-center"],[1,"card-body"],[1,"card-title","text-left"],[4,"ngFor","ngForOf"],[1,"card-footer"],["type","button",1,"btn","btn-primary",3,"disabled","click"],["type","button",1,"btn","btn-primary","float-end",3,"disabled","click"],[1,"input-group"],[1,"input-group-prepend","w-50"],[1,"fw-bold","input-group-text","w-100"],["type","number",1,"form-control",3,"ngModel","ngModelChange","change"]],template:function(t,s){t&1&&(c(0,"div",0)(1,"div",1),D(2,"app-stats",2),a(),c(3,"div",1)(4,"div",3)(5,"h5",4),u(6),a(),c(7,"div",5)(8,"h5",6),u(9,"The current teams are:"),a(),w(10,wt,6,3,"div",7),a(),c(11,"div",8)(12,"button",9),S("click",function(){return s.backClicked()}),u(13,"Back"),a(),c(14,"button",10),S("click",function(){return s.nextClicked()}),u(15),a()()()()()),t&2&&(l(2),h("roundInfo",s.roundInfo),l(4),V("",s.roundTitle,", Game ",s.currentGameIndex+1,"/",s.round.teams.length,""),l(4),h("ngForOf",s.nextSetOfTeams),l(2),h("disabled",s.backDisabled),l(2),h("disabled",s.nextDisabled),l(1),C(s.continueButtonText))},dependencies:[fe,A,$,W,ae,de,le,ce]});let n=i;return n})();var ge=class{static CreateRound(i,o,e=[],t=[]){return{players:e,teams:t,type:i,roundNumber:o}}};var Ct=(n,i)=>i.name;function Ot(n,i){if(n&1&&(c(0,"th",9),u(1),a()),n&2){let o=i.$implicit;l(1),C(o)}}var Mt=(n,i)=>i.score;function Rt(n,i){if(n&1&&(c(0,"span"),u(1),a()),n&2){let o=g().$implicit;l(1),H("/",o.secondScore,"")}}function Et(n,i){if(n&1&&(c(0,"td"),u(1),w(2,Rt,2,1,"span",15),a()),n&2){let o=i.$implicit;l(1),H(" ",o.score||"-",""),l(1),h("ngIf",o.secondScore)}}function It(n,i){if(n&1&&(c(0,"tr")(1,"th",14),u(2),a(),N(3,Et,3,2,"td",null,Mt),c(5,"td"),u(6),a()()),n&2){let o=i.$implicit;l(2),C(o.name),l(1),x(o.roundScore),l(3),C(o.totalScore)}}var Ke=(()=>{let i=class i{constructor(e,t){this.storageService=e,this.router=t,this.rounds=[],this.tableStats=[]}ngOnInit(){let e=this.storageService.getValue(f.GAME),t=this.storageService.getValue(f.ROUNDS);e!==null&&t!==null&&(this.game=e,this.rounds=t,this.generateTableStats())}playAgain(){this.router.navigate([`${re.CREATE}`])}getRoundData(e,t){return e.roundScore[t]}generateTableStats(){let e=[];for(let t=0;t<this.game.players.length;t++){let s={name:this.game.players[t].name,roundScore:[],totalScore:0,totalScoreWithExtra:null};e.push(s)}e.forEach(t=>{for(let s=0;s<this.rounds.length;s++){let r=this.rounds[s];if(r.type!==O.TEAM&&r.type!==O.USB){let m=r.players,y=JSON.parse(JSON.stringify([].concat(...m))),p=y.findIndex(z=>z.name===t.name),v={roundType:r.type,score:p>=0?y[p].score:null,secondScore:null};t.roundScore.push(v),t.totalScore+=p>=0?y[p].score:0;continue}else{let m=r.teams,y=JSON.parse(JSON.stringify([].concat(...m))),p=null,v=y.filter(J=>J.firstPlayer.name===t.name||J.secondPlayer.name===t.name);if(v.length<=0){t.roundScore.push({roundType:r.type,score:null,secondScore:null});continue}if(v.length>1&&(p=v[1].score),t.roundScore.some(J=>J.roundType===r.type))continue;let z={roundType:r.type,score:v[0].score,secondScore:p};t.roundScore.push(z);let K=p!==null?p:0,qe=v[0].score>K?v[0].score:K;t.totalScore+=qe}}}),this.tableStats=e}getWorstTeam(){let t=this.rounds[this.rounds.length-1].teams;if(!t)return null;let s=JSON.parse(JSON.stringify([].concat(...t)));return s.sort((r,d)=>r.score>d.score?1:-1),s[0]}getWorstPlayer(){let t=this.rounds[this.rounds.length-1].players;if(!t)return null;let s=JSON.parse(JSON.stringify([].concat(...t)));return s.sort((r,d)=>r.score>d.score?1:-1),s[0]}get squillyBowlChamp(){if(!this.game||!this.rounds)return"";if(this.game.hasTeams||this.game.usb){let t=this.getWorstTeam();return`${t?.firstPlayer.name}/${t?.secondPlayer.name}`}return`${this.getWorstPlayer()?.name}`}get roundNames(){let e=[];for(let t=0;t<this.rounds.length;t++)e.push(j.roundTitles[t]);return e}};i.\u0275fac=function(t){return new(t||i)(T(k),T(oe))},i.\u0275cmp=M({type:i,selectors:[["app-end-game"]],standalone:!0,features:[I],decls:29,vars:2,consts:[["clas","row"],[1,"col-12"],[1,"text-center"],[1,"text-success","fw-bold"],["src","./assets/Squilly_still_right.png","alt","image",1,"rounded"],[1,"text-success"],["src","./assets/Squilly_still_left.png","alt","image",1,"rounded"],[1,"row"],[1,"table","table-striped","border","border-5","border-dark","text-center"],["scope","col"],["scope","col",4,"ngFor","ngForOf"],[1,"row","mt-5"],[1,"col-12","text-center","d-grid"],["type","button",1,"btn","btn-success",3,"click"],["scope","row"],[4,"ngIf"]],template:function(t,s){t&1&&(c(0,"div",0)(1,"div",1)(2,"h1",2),u(3,"CONGRATS "),c(4,"span",3),u(5),a(),u(6," YOU ARE THE SQUILLYBOWL CHAMP!"),a(),c(7,"h3",2),D(8,"img",4),c(9,"span",5),u(10,"ENJOY YOUR TROPHY"),a(),D(11,"img",6),a()()(),c(12,"div",7)(13,"div",1)(14,"table",8)(15,"thead")(16,"tr")(17,"th",9),u(18,"Name"),a(),w(19,Ot,2,1,"th",10),c(20,"th",9),u(21,"Total Score"),a()()(),c(22,"tbody"),N(23,It,7,2,"tr",null,Ct),a()()()(),c(25,"div",11)(26,"div",12)(27,"button",13),S("click",function(){return s.playAgain()}),u(28,"Play Again!"),a()()()),t&2&&(l(5),C(s.squillyBowlChamp),l(14),h("ngForOf",s.roundNames),l(4),x(s.tableStats))},dependencies:[A,$,se]});let n=i;return n})();function Nt(n,i){if(n&1){let o=F();c(0,"div")(1,"app-single-round",2),S("moveToNextRound",function(){R(o);let t=g();return E(t.moveToNextRound())}),a()()}if(n&2){let o=g();l(1),h("round",o.rounds[o.currentRound])("roundIndex",o.currentRound)("roundTitle",o.roundTitle)}}function xt(n,i){if(n&1){let o=F();c(0,"div")(1,"app-team-round",2),S("moveToNextRound",function(){R(o);let t=g(2);return E(t.moveToNextRound())}),a()()}if(n&2){let o=g(2);l(1),h("round",o.rounds[o.currentRound])("roundIndex",o.currentRound)("roundTitle",o.roundTitle)}}function kt(n,i){n&1&&(c(0,"div"),D(1,"app-end-game"),a())}function Pt(n,i){if(n&1&&(c(0,"div"),w(1,xt,2,3,"div",1)(2,kt,2,0,"div",1),a()),n&2){let o=g();l(1),h("ngIf",o.game.hasTeams),l(1),h("ngIf",!o.game.hasTeams)}}function Bt(n,i){if(n&1){let o=F();c(0,"div")(1,"app-team-round",2),S("moveToNextRound",function(){R(o);let t=g(2);return E(t.moveToNextRound())}),a()()}if(n&2){let o=g(2);l(1),h("round",o.rounds[o.currentRound])("roundIndex",o.currentRound)("roundTitle",o.roundTitle)}}function Ft(n,i){n&1&&(c(0,"div"),D(1,"app-end-game"),a())}function At(n,i){if(n&1&&(c(0,"div"),w(1,Bt,2,3,"div",1)(2,Ft,2,0,"div",1),a()),n&2){let o=g();l(1),h("ngIf",o.game.usb),l(1),h("ngIf",!o.game.usb)}}function Ut(n,i){n&1&&(c(0,"div")(1,"div"),D(2,"app-end-game"),a()())}var Je=(()=>{let i=class i{constructor(e,t,s){this.storageService=e,this.gameService=t,this.router=s,this.splitPlayers=[],this.rounds=[]}ngOnInit(){let e=this.storageService.getValue(f.GAME);if(e===null){this.router.navigate([`${re.CREATE}`]);return}this.game=e;let t=this.storageService.getValue(f.ROUNDS);if(this.rounds=t!==null?t:[],this.game.round===1)if(!t)this.setupFirstRoundPlayers(this.game.players),this.createNewRound(this.splitPlayers,[],O.NORMAL,1);else{let s=this.rounds[this.currentRound].players;s&&(this.splitPlayers=s),this.createNewRound(this.splitPlayers,[],O.NORMAL,1,!1)}}moveToNextRound(){if(this.currentRound===0){let e=this.rounds[this.currentRound].players;if(!e)return;let t=JSON.parse(JSON.stringify([].concat(...e)));t.sort((p,v)=>p.score>v.score?-1:1);let s=Math.ceil(t.length/2),r=t.slice(0,s),d=t.slice(s,t.length);r.map(p=>p.score=-1),d.map(p=>p.score=-1);let m=this.gameService.generateSingleRoundOrder(r),y=this.gameService.generateSingleRoundOrder(d);this.createNewRound(m,[],O.WINNNER,2),this.createNewRound(y,[],O.LOSER,3),this.game.round++,this.saveGameToStorage();return}if(this.currentRound===1){this.game.round++,this.saveGameToStorage();return}if(this.currentRound===2){if(this.game.hasTeams){let e=this.rounds[this.currentRound-1].players,t=this.rounds[this.currentRound].players;if(!e||!t)return;let s=JSON.parse(JSON.stringify([].concat(...e))),r=JSON.parse(JSON.stringify([].concat(...t)));s.sort((p,v)=>p.score>v.score?-1:1),r.sort((p,v)=>p.score>v.score?-1:1);let d=this.gameService.generateTeams(s,r),m=this.storageService.getValue(f.ROUNDS);if(!m)return;let y=!m.some(p=>p.type===O.TEAM);this.createNewRound([],d,O.TEAM,4,y)}this.game.round++,this.saveGameToStorage();return}if(this.currentRound===3){if(this.game.usb){let e=this.rounds[this.currentRound].teams,t=JSON.parse(JSON.stringify([].concat(...e)));t.sort((p,v)=>p.score>v.score?-1:1);let s=[],r=t[0],d=t[t.length-1];r.score=-1,d.score=-1,s.push([r,d]);let m=this.storageService.getValue(f.ROUNDS);if(!m)return;let y=!m.some(p=>p.type===O.USB);this.createNewRound([],s,O.USB,5,y)}this.game.round++,this.saveGameToStorage();return}if(this.currentRound===4){this.game.round++,this.saveGameToStorage();return}}createNewRound(e,t,s,r,d=!0){let m=this.storageService.getValue(f.ROUNDS);if(m&&m[r])return;let y=ge.CreateRound(s,r,e,t);this.rounds.push(y),d&&this.storageService.setValue(f.ROUNDS,this.rounds)}setupFirstRoundPlayers(e){this.splitPlayers=this.gameService.generateSingleRoundOrder(e)}saveGameToStorage(){this.storageService.setValue(f.GAME,this.game)}get currentRound(){return this.game.round-1}get roundTitle(){return j.roundTitles[this.currentRound]}};i.\u0275fac=function(t){return new(t||i)(T(k),T(Le),T(oe))},i.\u0275cmp=M({type:i,selectors:[["app-play"]],standalone:!0,features:[I],decls:5,vars:4,consts:[[1,"container","mt-5","overflow-auto"],[4,"ngIf"],[3,"round","roundIndex","roundTitle","moveToNextRound"]],template:function(t,s){t&1&&(c(0,"div",0),w(1,Nt,2,3,"div",1)(2,Pt,3,2,"div",1)(3,At,3,2,"div",1)(4,Ut,3,0,"div",1),a()),t&2&&(l(1),h("ngIf",s.currentRound<=2),l(1),h("ngIf",s.currentRound==3),l(1),h("ngIf",s.currentRound==4),l(1),h("ngIf",s.currentRound>4))},dependencies:[A,se,W,Qe,Ye,Ke]});let n=i;return n})();var Xn=[{path:"",component:Je}];export{Xn as default};
