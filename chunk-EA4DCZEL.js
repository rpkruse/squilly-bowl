import{b as oe,c as re,d as ae,e as le,f as W,g as x,h as Le}from"./chunk-QSFGEIKN.js";import{b as $,c as se,d as A,g as Ae}from"./chunk-LFMBSV7D.js";import{a as Ue,b as T,c as f,d as j}from"./chunk-XPR4DZM4.js";import{$ as k,Aa as X,Ba as b,Ca as Fe,E as Ee,Ea as ve,Fa as ye,Ga as d,Ha as F,Ia as Pe,Ja as S,Ka as L,La as I,M as G,Ma as N,Na as c,Oa as l,Pa as P,Qa as B,R as Z,Ra as Q,S as Ie,Ta as D,Ua as g,V as Ne,Va as p,Wa as R,X as _,Xa as H,Ya as ee,Z as C,Za as V,_ as xe,ba as O,bb as E,ca as M,cb as Be,db as te,e as q,eb as ie,fb as ne,h as fe,ia as ke,j as we,l as Te,sa as ge,v as Ce,w as Oe,x as Me,xa as a,y as Re,ya as w,za as me}from"./chunk-XYVOFFDO.js";function ce(n){n||(ke(ce),n=_(X));let t=new q(o=>n.onDestroy(o.next.bind(o)));return o=>o.pipe(G(t))}var He={animation:!0,transitionTimerDelayMs:5},Ve=(()=>{let t=class t{constructor(){this.animation=He.animation}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=Z({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})(),Xe=(()=>{let t=class t{constructor(){this._ngbConfig=_(Ve),this.closeOthers=!1,this.destroyOnHide=!0}get animation(){return this._animation??this._ngbConfig.animation}set animation(e){this._animation=e}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=Z({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();function et(n){let{transitionDelay:t,transitionDuration:o}=window.getComputedStyle(n),e=parseFloat(t),i=parseFloat(o);return(e+i)*1e3}function tt(n){return typeof n=="string"}function it(n){return(n||document.body).getBoundingClientRect()}function nt(n){return t=>new q(o=>{let e=r=>n.run(()=>o.next(r)),i=r=>n.run(()=>o.error(r)),s=()=>n.run(()=>o.complete());return t.subscribe({next:e,error:i,complete:s})})}var st=()=>{},{transitionTimerDelayMs:ot}=He,de=new Map,rt=(n,t,o,e)=>{let i=e.context||{},s=de.get(t);if(s)switch(e.runningTransition){case"continue":return we;case"stop":n.run(()=>s.transition$.complete()),i=Object.assign(s.context,i),de.delete(t)}let r=o(t,e.animation,i)||st;if(!e.animation||window.getComputedStyle(t).transitionProperty==="none")return n.run(()=>r()),Te(void 0).pipe(nt(n));let u=new fe,m=new fe,y=u.pipe(Ee(!0));de.set(t,{transition$:u,complete:()=>{m.next(),m.complete()},context:i});let h=et(t);return n.runOutsideAngular(()=>{let v=Ce(t,"transitionend").pipe(G(y),Me(({target:K})=>K===t)),z=Oe(h+ot).pipe(G(y));Re(z,v,m).pipe(G(y)).subscribe(()=>{de.delete(t),n.run(()=>{r(),u.next(),u.complete()})})}),u.asObservable()};function at(n,t){if(typeof navigator>"u")return"0px";let{classList:o}=n,e=o.contains("show");e||o.add("show"),n.style[t]="";let i=n.getBoundingClientRect()[t]+"px";return e||o.remove("show"),i}var lt=(n,t,o)=>{let{direction:e,maxSize:i,dimension:s}=o,{classList:r}=n;function u(){r.add("collapse"),e==="show"?r.add("show"):r.remove("show")}if(!t){u();return}return i||(i=at(n,s),o.maxSize=i,n.style[s]=e!=="show"?i:"0px",r.remove("collapse"),r.remove("collapsing"),r.remove("show"),it(n),r.add("collapsing")),n.style[s]=e==="show"?i:"0px",()=>{u(),r.remove("collapsing"),n.style[s]=""}},ct=(()=>{let t=class t{constructor(){this._ngbConfig=_(Ve),this.horizontal=!1}get animation(){return this._animation??this._ngbConfig.animation}set animation(e){this._animation=e}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=Z({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})(),Ge=(()=>{let t=class t{constructor(){this._config=_(ct),this._element=_(ge),this._zone=_(Fe),this.animation=this._config.animation,this._afterInit=!1,this._isCollapsed=!1,this.ngbCollapseChange=new b,this.horizontal=this._config.horizontal,this.shown=new b,this.hidden=new b}set collapsed(e){this._isCollapsed!==e&&(this._isCollapsed=e,this._afterInit&&this._runTransitionWithEvents(e,this.animation))}ngOnInit(){this._runTransition(this._isCollapsed,!1),this._afterInit=!0}toggle(e=this._isCollapsed){this.collapsed=!e,this.ngbCollapseChange.next(this._isCollapsed)}_runTransition(e,i){return rt(this._zone,this._element.nativeElement,lt,{animation:i,runningTransition:"stop",context:{direction:e?"hide":"show",dimension:this.horizontal?"width":"height"}})}_runTransitionWithEvents(e,i){this._runTransition(e,i).subscribe(()=>{e?this.hidden.emit():this.shown.emit()})}};t.\u0275fac=function(i){return new(i||t)},t.\u0275dir=k({type:t,selectors:[["","ngbCollapse",""]],hostVars:2,hostBindings:function(i,s){i&2&&F("collapse-horizontal",s.horizontal)},inputs:{animation:"animation",collapsed:["ngbCollapse","collapsed"],horizontal:"horizontal"},outputs:{ngbCollapseChange:"ngbCollapseChange",shown:"shown",hidden:"hidden"},exportAs:["ngbCollapse"],standalone:!0});let n=t;return n})(),dt=0,$e=(()=>{let t=class t{constructor(){this._vcr=_(Pe),this._element=_(ge).nativeElement,this._item=_(U),this._viewRef=null}ngAfterContentChecked(){this._bodyTpl&&(this._item._shouldBeInDOM?this._createViewIfNotExists():this._destroyViewIfExists())}ngOnDestroy(){this._destroyViewIfExists()}_destroyViewIfExists(){this._viewRef&&(this._viewRef.destroy(),this._viewRef=null)}_createViewIfNotExists(){if(!this._viewRef){this._viewRef=this._vcr.createEmbeddedView(this._bodyTpl),this._viewRef.detectChanges();for(let e of this._viewRef.rootNodes)this._element.appendChild(e)}}};t.\u0275fac=function(i){return new(i||t)},t.\u0275dir=k({type:t,selectors:[["","ngbAccordionBody",""]],contentQueries:function(i,s,r){if(i&1&&ie(r,Be,7),i&2){let u;te(u=ne())&&(s._bodyTpl=u.first)}},hostVars:2,hostBindings:function(i,s){i&2&&F("accordion-body",!0)},standalone:!0});let n=t;return n})(),be=(()=>{let t=class t{constructor(){this.item=_(U),this.ngbCollapse=_(Ge)}};t.\u0275fac=function(i){return new(i||t)},t.\u0275dir=k({type:t,selectors:[["","ngbAccordionCollapse",""]],hostAttrs:["role","region"],hostVars:4,hostBindings:function(i,s){i&2&&(Q("id",s.item.collapseId),ye("aria-labelledby",s.item.toggleId),F("accordion-collapse",!0))},exportAs:["ngbAccordionCollapse"],standalone:!0,features:[ve([Ge])]});let n=t;return n})(),ut=(()=>{let t=class t{constructor(){this.item=_(U),this.accordion=_(ue)}};t.\u0275fac=function(i){return new(i||t)},t.\u0275dir=k({type:t,selectors:[["","ngbAccordionToggle",""]],hostVars:5,hostBindings:function(i,s){i&1&&D("click",function(){return!s.item.disabled&&s.accordion.toggle(s.item.id)}),i&2&&(Q("id",s.item.toggleId),ye("aria-controls",s.item.collapseId)("aria-expanded",!s.item.collapsed),F("collapsed",s.item.collapsed))},standalone:!0});let n=t;return n})(),je=(()=>{let t=class t{constructor(){this.item=_(U)}};t.\u0275fac=function(i){return new(i||t)},t.\u0275dir=k({type:t,selectors:[["button","ngbAccordionButton",""]],hostAttrs:["type","button"],hostVars:3,hostBindings:function(i,s){i&2&&(Q("disabled",s.item.disabled),F("accordion-button",!0))},standalone:!0,features:[ve([ut])]});let n=t;return n})(),We=(()=>{let t=class t{constructor(){this.item=_(U)}};t.\u0275fac=function(i){return new(i||t)},t.\u0275dir=k({type:t,selectors:[["","ngbAccordionHeader",""]],hostAttrs:["role","heading"],hostVars:4,hostBindings:function(i,s){i&2&&F("accordion-header",!0)("collapsed",s.item.collapsed)},standalone:!0});let n=t;return n})(),U=(()=>{let t=class t{constructor(){this._accordion=_(ue),this._cd=_(me),this._destroyRef=_(X),this._collapsed=!0,this._id=`ngb-accordion-item-${dt++}`,this._collapseAnimationRunning=!1,this.disabled=!1,this.show=new b,this.shown=new b,this.hide=new b,this.hidden=new b}set id(e){tt(e)&&e!==""&&(this._id=e)}set destroyOnHide(e){this._destroyOnHide=e}get destroyOnHide(){return this._destroyOnHide===void 0?this._accordion.destroyOnHide:this._destroyOnHide}set collapsed(e){e?this.collapse():this.expand()}get collapsed(){return this._collapsed}get id(){return`${this._id}`}get toggleId(){return`${this.id}-toggle`}get collapseId(){return`${this.id}-collapse`}get _shouldBeInDOM(){return!this.collapsed||this._collapseAnimationRunning||!this.destroyOnHide}ngAfterContentInit(){let{ngbCollapse:e}=this._collapse;e.animation=!1,e.collapsed=this.collapsed,e.animation=this._accordion.animation,e.hidden.pipe(ce(this._destroyRef)).subscribe(()=>{this._collapseAnimationRunning=!1,this.hidden.emit(),this._accordion.hidden.emit(this.id)}),e.shown.pipe(ce(this._destroyRef)).subscribe(()=>{this.shown.emit(),this._accordion.shown.emit(this.id)})}toggle(){this.collapsed=!this.collapsed}expand(){if(this.collapsed){if(!this._accordion._ensureCanExpand(this))return;this._collapsed=!1,this._cd.markForCheck(),this._cd.detectChanges(),this.show.emit(),this._accordion.show.emit(this.id),this._collapse.ngbCollapse.animation=this._accordion.animation,this._collapse.ngbCollapse.collapsed=!1}}collapse(){this.collapsed||(this._collapsed=!0,this._collapseAnimationRunning=!0,this._cd.markForCheck(),this.hide.emit(),this._accordion.hide.emit(this.id),this._collapse.ngbCollapse.animation=this._accordion.animation,this._collapse.ngbCollapse.collapsed=!0)}};t.\u0275fac=function(i){return new(i||t)},t.\u0275dir=k({type:t,selectors:[["","ngbAccordionItem",""]],contentQueries:function(i,s,r){if(i&1&&ie(r,be,7),i&2){let u;te(u=ne())&&(s._collapse=u.first)}},hostVars:3,hostBindings:function(i,s){i&2&&(Q("id",s.id),F("accordion-item",!0))},inputs:{id:["ngbAccordionItem","id"],destroyOnHide:"destroyOnHide",disabled:"disabled",collapsed:"collapsed"},outputs:{show:"show",shown:"shown",hide:"hide",hidden:"hidden"},exportAs:["ngbAccordionItem"],standalone:!0});let n=t;return n})(),ue=(()=>{let t=class t{constructor(){this._config=_(Xe),this._anItemWasAlreadyExpandedDuringInitialisation=!1,this.animation=this._config.animation,this.closeOthers=this._config.closeOthers,this.destroyOnHide=this._config.destroyOnHide,this.show=new b,this.shown=new b,this.hide=new b,this.hidden=new b}toggle(e){this._getItem(e)?.toggle()}expand(e){this._getItem(e)?.expand()}expandAll(){this._items&&(this.closeOthers?this._items.find(e=>!e.collapsed)||this._items.first.expand():this._items.forEach(e=>e.expand()))}collapse(e){this._getItem(e)?.collapse()}collapseAll(){this._items?.forEach(e=>e.collapse())}isExpanded(e){let i=this._getItem(e);return i?!i.collapsed:!1}_ensureCanExpand(e){return this.closeOthers?this._items?(this._items.find(i=>!i.collapsed&&e!==i)?.collapse(),!0):this._anItemWasAlreadyExpandedDuringInitialisation?!1:(this._anItemWasAlreadyExpandedDuringInitialisation=!0,!0):!0}_getItem(e){return this._items?.find(i=>i.id===e)}};t.\u0275fac=function(i){return new(i||t)},t.\u0275dir=k({type:t,selectors:[["","ngbAccordion",""]],contentQueries:function(i,s,r){if(i&1&&ie(r,U,4),i&2){let u;te(u=ne())&&(s._items=u)}},hostVars:2,hostBindings:function(i,s){i&2&&F("accordion",!0)},inputs:{animation:"animation",closeOthers:"closeOthers",destroyOnHide:"destroyOnHide"},outputs:{show:"show",shown:"shown",hide:"hide",hidden:"hidden"},exportAs:["ngbAccordion"],standalone:!0});let n=t;return n})();var ze=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=xe({type:t}),t.\u0275inj=Ie({});let n=t;return n})();var ln=(()=>{let n=()=>/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2,t=()=>/Android/.test(navigator.userAgent);return typeof navigator<"u"?!!navigator.userAgent&&(n()||t()):!1})();var cn=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");var dn=new Date(1882,10,12),un=new Date(2174,10,25);var hn=1e3*60*60*24;var Se=1080,ht=24*Se,pt=12*Se+793,pn=29*ht+pt,_n=11*Se+204;var fn=new Ne("live announcer delay",{providedIn:"root",factory:()=>100});function ft(n,t){if(n&1&&(c(0,"div"),p(1),l()),n&2){let o=t.$implicit;a(1),ee(" ",o.name,": ",o.score," ")}}function gt(n,t){if(n&1&&I(0,ft,2,2,"div",null,L),n&2){let o=t.$implicit;N(o)}}function mt(n,t){if(n&1&&(c(0,"div"),p(1),l()),n&2){let o=t.$implicit;a(1),V(" ",o.firstPlayer.name,"/",o.secondPlayer.name,": ",o.score," ")}}function vt(n,t){if(n&1&&I(0,mt,2,3,"div",null,L),n&2){let o=t.$implicit;N(o)}}function yt(n,t){if(n&1&&(I(0,gt,2,0,null,null,L),I(2,vt,2,0,null,null,L)),n&2){let o=g().$implicit;N(o.players),a(2),N(o.teams)}}function bt(n,t){if(n&1&&(c(0,"div",4)(1,"h2",5)(2,"button",6),p(3),l()(),c(4,"div",7)(5,"div",8),S(6,yt,4,0,"ng-template"),l()()()),n&2){let o=t.$index,e=g();a(3),R(e.roundTitle(o))}}var pe=(()=>{let t=class t{set roundInfo(e){this._roundInfo=e;let i=this.storageService.getValue(f.ROUNDS);i&&(this._roundInfo=i)}get roundInfo(){return this._roundInfo}constructor(e){this.storageService=e}roundTitle(e){return j.roundTitles[e]}};t.\u0275fac=function(i){return new(i||t)(w(x))},t.\u0275cmp=C({type:t,selectors:[["app-stats"]],inputs:{roundInfo:"roundInfo"},standalone:!0,features:[E],decls:7,vars:1,consts:[[1,"card","h-100"],[1,"card-header","text-center"],[1,"card-body"],["ngbAccordion","",3,"closeOthers"],["ngbAccordionItem",""],["ngbAccordionHeader",""],["ngbAccordionButton",""],["ngbAccordionCollapse",""],["ngbAccordionBody",""]],template:function(i,s){i&1&&(c(0,"div",0)(1,"h5",1),p(2,"Round History"),l(),c(3,"div",2)(4,"div",3),I(5,bt,7,1,"div",4,L),l()()()),i&2&&(a(4),d("closeOthers",!0),a(1),N(s.roundInfo))},dependencies:[ze,je,ue,U,We,$e,be]});let n=t;return n})();function Dt(n,t){if(n&1){let o=B();c(0,"div")(1,"div",11)(2,"div",12)(3,"span",13),p(4),l()(),c(5,"input",14),D("ngModelChange",function(i){let r=O(o).$implicit;return M(r.score=i)})("change",function(){O(o);let i=g();return M(i.saveRoundDataToStorage())}),l()()()}if(n&2){let o=t.$implicit;a(4),H("",o.name,"'s Score:"),a(1),d("ngModel",o.score)}}var Qe=(()=>{let t=class t{set round(e){this._round=e,this.currentGameIndex=0;let i=this.storageService.getValue(f.ROUNDS);i&&(this.roundInfo=i)}get round(){return this._round}constructor(e){this.storageService=e,this.roundTitle="",this.moveToNextRound=new b,this.currentGameIndex=0,this.roundInfo=[]}saveRoundDataToStorage(){let e=this.storageService.getValue(f.ROUNDS);e&&(e[this.roundIndex]=this.round,this.storageService.setValue(f.ROUNDS,e),this.roundInfo=e)}nextClicked(){this.saveRoundDataToStorage();let e=this.round.players?this.round.players.length-1:0;if(this.currentGameIndex>=e){this.moveToNextRound.emit(!0);return}this.currentGameIndex++}backClicked(){this.currentGameIndex<=0||this.currentGameIndex--}get nextSetOfPlayers(){return this.round.players&&this.round.players.length>0?this.round.players[this.currentGameIndex]:[]}get continueButtonText(){let e=this.round.players?this.round.players.length-1:0;return this.currentGameIndex>=e?"Next Round":"Next Set"}get backDisabled(){return this.currentGameIndex===0}get nextDisabled(){return this.round.players?this.round.players[this.currentGameIndex].some(e=>e.score<=-1||isNaN(e.score)||e.score===null||e.score===void 0):!0}};t.\u0275fac=function(i){return new(i||t)(w(x))},t.\u0275cmp=C({type:t,selectors:[["app-single-round"]],inputs:{round:"round",roundTitle:"roundTitle",roundIndex:"roundIndex"},outputs:{moveToNextRound:"moveToNextRound"},standalone:!0,features:[E],decls:16,vars:8,consts:[[1,"row"],[1,"col-6"],[3,"roundInfo"],[1,"card","h-100"],[1,"card-header","text-center"],[1,"card-body"],[1,"card-title","text-left"],[4,"ngFor","ngForOf"],[1,"card-footer"],["type","button",1,"btn","btn-primary",3,"disabled","click"],["type","button",1,"btn","btn-primary","float-end",3,"disabled","click"],[1,"input-group"],[1,"input-group-prepend","w-25"],[1,"fw-bold","input-group-text","w-100"],["type","number",1,"form-control",3,"ngModel","ngModelChange","change"]],template:function(i,s){i&1&&(c(0,"div",0)(1,"div",1),P(2,"app-stats",2),l(),c(3,"div",1)(4,"div",3)(5,"h5",4),p(6),l(),c(7,"div",5)(8,"h5",6),p(9,"The current players are:"),l(),S(10,Dt,6,2,"div",7),l(),c(11,"div",8)(12,"button",9),D("click",function(){return s.backClicked()}),p(13,"Back"),l(),c(14,"button",10),D("click",function(){return s.nextClicked()}),p(15),l()()()()()),i&2&&(a(2),d("roundInfo",s.roundInfo),a(4),V("",s.roundTitle,", Game ",s.currentGameIndex+1,"/",s.round.players.length,""),a(4),d("ngForOf",s.nextSetOfPlayers),a(2),d("disabled",s.backDisabled),a(2),d("disabled",s.nextDisabled),a(1),R(s.continueButtonText))},dependencies:[pe,A,$,W,oe,le,re,ae]});let n=t;return n})();function wt(n,t){if(n&1){let o=B();c(0,"div")(1,"div",11)(2,"div",12)(3,"span",13),p(4),l()(),c(5,"input",14),D("ngModelChange",function(i){let r=O(o).$implicit;return M(r.score=i)})("change",function(){O(o);let i=g();return M(i.saveRoundDataToStorage())}),l()()()}if(n&2){let o=t.$implicit;a(4),ee("",o.firstPlayer.name,"/",o.secondPlayer.name,"'s Score:"),a(1),d("ngModel",o.score)}}var Ye=(()=>{let t=class t{set round(e){this._round=e,this.currentGameIndex=0;let i=this.storageService.getValue(f.ROUNDS);i&&(this.roundInfo=i)}get round(){return this._round}constructor(e){this.storageService=e,this.roundTitle="",this.moveToNextRound=new b,this.currentGameIndex=0,this.roundInfo=[]}saveRoundDataToStorage(){let e=this.storageService.getValue(f.ROUNDS);e&&(e[this.roundIndex]=this.round,this.storageService.setValue(f.ROUNDS,e),this.roundInfo=e)}nextClicked(){this.saveRoundDataToStorage();let e=this.round.teams?this.round.teams.length-1:0;if(this.currentGameIndex>=e){this.moveToNextRound.emit(!0);return}this.currentGameIndex++}backClicked(){this.currentGameIndex<=0||this.currentGameIndex--}get nextSetOfTeams(){return this.round.teams&&this.round.teams.length>0?this.round.teams[this.currentGameIndex]:[]}get continueButtonText(){let e=this.round.teams?this.round.teams.length-1:0;return this.currentGameIndex>=e?"Next Round":"Next Set"}get backDisabled(){return this.currentGameIndex===0}get nextDisabled(){return this.round.teams?this.round.teams[this.currentGameIndex].some(e=>e.score<=-1||isNaN(e.score)||e.score===null||e.score===void 0):!0}};t.\u0275fac=function(i){return new(i||t)(w(x))},t.\u0275cmp=C({type:t,selectors:[["app-team-round"]],inputs:{round:"round",roundTitle:"roundTitle",roundIndex:"roundIndex"},outputs:{moveToNextRound:"moveToNextRound"},standalone:!0,features:[E],decls:16,vars:8,consts:[[1,"row"],[1,"col-6"],[3,"roundInfo"],[1,"card","h-100"],[1,"card-header","text-center"],[1,"card-body"],[1,"card-title","text-left"],[4,"ngFor","ngForOf"],[1,"card-footer"],["type","button",1,"btn","btn-primary",3,"disabled","click"],["type","button",1,"btn","btn-primary","float-end",3,"disabled","click"],[1,"input-group"],[1,"input-group-prepend","w-50"],[1,"fw-bold","input-group-text","w-100"],["type","number",1,"form-control",3,"ngModel","ngModelChange","change"]],template:function(i,s){i&1&&(c(0,"div",0)(1,"div",1),P(2,"app-stats",2),l(),c(3,"div",1)(4,"div",3)(5,"h5",4),p(6),l(),c(7,"div",5)(8,"h5",6),p(9,"The current teams are:"),l(),S(10,wt,6,3,"div",7),l(),c(11,"div",8)(12,"button",9),D("click",function(){return s.backClicked()}),p(13,"Back"),l(),c(14,"button",10),D("click",function(){return s.nextClicked()}),p(15),l()()()()()),i&2&&(a(2),d("roundInfo",s.roundInfo),a(4),V("",s.roundTitle,", Game ",s.currentGameIndex+1,"/",s.round.teams.length,""),a(4),d("ngForOf",s.nextSetOfTeams),a(2),d("disabled",s.backDisabled),a(2),d("disabled",s.nextDisabled),a(1),R(s.continueButtonText))},dependencies:[pe,A,$,W,oe,le,re,ae]});let n=t;return n})();var _e=class{static CreateRound(t,o,e=[],i=[]){return{players:e,teams:i,type:t,roundNumber:o}}};var Tt=(n,t)=>t.name;function Ct(n,t){if(n&1&&(c(0,"th",3),p(1),l()),n&2){let o=t.$implicit;a(1),R(o)}}var Ot=(n,t)=>t.score;function Mt(n,t){if(n&1&&(c(0,"span"),p(1),l()),n&2){let o=g().$implicit;a(1),H("/",o.secondScore,"")}}function Rt(n,t){if(n&1&&(c(0,"td"),p(1),S(2,Mt,2,1,"span",6),l()),n&2){let o=t.$implicit;a(1),H(" ",o.score||"-",""),a(1),d("ngIf",o.secondScore)}}function Et(n,t){if(n&1&&(c(0,"tr")(1,"th",5),p(2),l(),I(3,Rt,3,2,"td",null,Ot),c(5,"td"),p(6),l()()),n&2){let o=t.$implicit;a(2),R(o.name),a(1),N(o.roundScore),a(3),R(o.totalScore)}}var Ke=(()=>{let t=class t{constructor(e){this.storageService=e,this.rounds=[],this.tableStats=[]}ngOnInit(){let e=this.storageService.getValue(f.GAME),i=this.storageService.getValue(f.ROUNDS);e!==null&&i!==null&&(this.game=e,this.rounds=i,console.log(this.game),console.log(this.rounds),this.generateTableStats(),this.generateEndgameStats())}getRoundData(e,i){return e.roundScore[i]}generateTableStats(){let e=[];for(let i=0;i<this.game.players.length;i++){let s={name:this.game.players[i].name,roundScore:[],totalScore:0,totalScoreWithExtra:null};e.push(s)}e.forEach(i=>{for(let s=0;s<this.rounds.length;s++){let r=this.rounds[s];if(r.type!==T.TEAM&&r.type!==T.USB){let m=r.players,y=JSON.parse(JSON.stringify([].concat(...m))),h=y.findIndex(z=>z.name===i.name),v={roundType:r.type,score:h>=0?y[h].score:null,secondScore:null};i.roundScore.push(v),i.totalScore+=h>=0?y[h].score:0;continue}else{let m=r.teams,y=JSON.parse(JSON.stringify([].concat(...m))),h=null,v=y.filter(J=>J.firstPlayer.name===i.name||J.secondPlayer.name===i.name);if(v.length<=0){i.roundScore.push({roundType:r.type,score:null,secondScore:null});continue}if(v.length>1&&(h=v[1].score),i.roundScore.some(J=>J.roundType===r.type)){console.log(`${i.name} alreay has a score for ${r.type}`);continue}let z={roundType:r.type,score:v[0].score,secondScore:h};i.roundScore.push(z);let K=h!==null?h:0,qe=v[0].score>K?v[0].score:K;i.totalScore+=qe}}}),this.tableStats=e}generateEndgameStats(){}get roundNames(){let e=[];for(let i=0;i<this.rounds.length;i++)e.push(j.roundTitles[i]);return e}};t.\u0275fac=function(i){return new(i||t)(w(x))},t.\u0275cmp=C({type:t,selectors:[["app-end-game"]],standalone:!0,features:[E],decls:13,vars:1,consts:[[1,"row"],[1,"col-12"],[1,"table","table-striped"],["scope","col"],["scope","col",4,"ngFor","ngForOf"],["scope","row"],[4,"ngIf"]],template:function(i,s){i&1&&(c(0,"div",0)(1,"div",1)(2,"table",2)(3,"thead")(4,"tr")(5,"th",3),p(6,"Name"),l(),S(7,Ct,2,1,"th",4),c(8,"th",3),p(9,"Total Score"),l()()(),c(10,"tbody"),I(11,Et,7,2,"tr",null,Tt),l()()()()),i&2&&(a(7),d("ngForOf",s.roundNames),a(4),N(s.tableStats))},dependencies:[A,$,se]});let n=t;return n})();function It(n,t){if(n&1){let o=B();c(0,"div")(1,"app-single-round",2),D("moveToNextRound",function(){O(o);let i=g();return M(i.moveToNextRound())}),l()()}if(n&2){let o=g();a(1),d("round",o.rounds[o.currentRound])("roundIndex",o.currentRound)("roundTitle",o.roundTitle)}}function Nt(n,t){if(n&1){let o=B();c(0,"div")(1,"app-team-round",2),D("moveToNextRound",function(){O(o);let i=g(2);return M(i.moveToNextRound())}),l()()}if(n&2){let o=g(2);a(1),d("round",o.rounds[o.currentRound])("roundIndex",o.currentRound)("roundTitle",o.roundTitle)}}function xt(n,t){n&1&&(c(0,"div"),P(1,"app-end-game"),l())}function kt(n,t){if(n&1&&(c(0,"div"),S(1,Nt,2,3,"div",1)(2,xt,2,0,"div",1),l()),n&2){let o=g();a(1),d("ngIf",o.game.hasTeams),a(1),d("ngIf",!o.game.hasTeams)}}function Ft(n,t){if(n&1){let o=B();c(0,"div")(1,"app-team-round",2),D("moveToNextRound",function(){O(o);let i=g(2);return M(i.moveToNextRound())}),l()()}if(n&2){let o=g(2);a(1),d("round",o.rounds[o.currentRound])("roundIndex",o.currentRound)("roundTitle",o.roundTitle)}}function Pt(n,t){n&1&&(c(0,"div"),P(1,"app-end-game"),l())}function Bt(n,t){if(n&1&&(c(0,"div"),S(1,Ft,2,3,"div",1)(2,Pt,2,0,"div",1),l()),n&2){let o=g();a(1),d("ngIf",o.game.usb),a(1),d("ngIf",!o.game.usb)}}function At(n,t){n&1&&(c(0,"div")(1,"div"),P(2,"app-end-game"),l()())}var Je=(()=>{let t=class t{constructor(e,i,s){this.storageService=e,this.gameService=i,this.router=s,this.splitPlayers=[],this.rounds=[]}ngOnInit(){let e=this.storageService.getValue(f.GAME);if(e===null){this.router.navigate([`${Ue.CREATE}`]);return}this.game=e;let i=this.storageService.getValue(f.ROUNDS);if(this.rounds=i!==null?i:[],this.game.round===1)if(!i)this.setupFirstRoundPlayers(this.game.players),this.createNewRound(this.splitPlayers,[],T.NORMAL,1);else{let s=this.rounds[this.currentRound].players;s&&(this.splitPlayers=s),this.createNewRound(this.splitPlayers,[],T.NORMAL,1,!1)}}moveToNextRound(){if(this.currentRound===0){let e=this.rounds[this.currentRound].players;if(!e)return;let i=JSON.parse(JSON.stringify([].concat(...e)));i.sort((h,v)=>h.score>v.score?-1:1);let s=Math.ceil(i.length/2),r=i.slice(0,s),u=i.slice(s,i.length);r.map(h=>h.score=-1),u.map(h=>h.score=-1);let m=this.gameService.generateSingleRoundOrder(r),y=this.gameService.generateSingleRoundOrder(u);this.createNewRound(m,[],T.WINNNER,2),this.createNewRound(y,[],T.LOSER,3),this.game.round++,this.saveGameToStorage();return}if(this.currentRound===1){this.game.round++,this.saveGameToStorage();return}if(this.currentRound===2){if(this.game.hasTeams){let e=this.rounds[this.currentRound-1].players,i=this.rounds[this.currentRound].players;if(!e||!i)return;let s=JSON.parse(JSON.stringify([].concat(...e))),r=JSON.parse(JSON.stringify([].concat(...i)));s.sort((h,v)=>h.score>v.score?-1:1),r.sort((h,v)=>h.score>v.score?-1:1);let u=this.gameService.generateTeams(s,r),m=this.storageService.getValue(f.ROUNDS);if(!m)return;let y=!m.some(h=>h.type===T.TEAM);this.createNewRound([],u,T.TEAM,4,y)}this.game.round++,this.saveGameToStorage();return}if(this.currentRound===3){if(this.game.usb){let e=this.rounds[this.currentRound].teams,i=JSON.parse(JSON.stringify([].concat(...e)));i.sort((h,v)=>h.score>v.score?-1:1);let s=[],r=i[0],u=i[i.length-1];r.score=-1,u.score=-1,s.push([r,u]);let m=this.storageService.getValue(f.ROUNDS);if(!m)return;let y=!m.some(h=>h.type===T.USB);this.createNewRound([],s,T.USB,5,y)}this.game.round++,this.saveGameToStorage();return}if(this.currentRound===4){this.game.round++,this.saveGameToStorage();return}}createNewRound(e,i,s,r,u=!0){let m=this.storageService.getValue(f.ROUNDS);if(m&&m[r])return;let y=_e.CreateRound(s,r,e,i);this.rounds.push(y),u&&this.storageService.setValue(f.ROUNDS,this.rounds)}setupFirstRoundPlayers(e){this.splitPlayers=this.gameService.generateSingleRoundOrder(e)}saveGameToStorage(){this.storageService.setValue(f.GAME,this.game)}get currentRound(){return this.game.round-1}get roundTitle(){return j.roundTitles[this.currentRound]}};t.\u0275fac=function(i){return new(i||t)(w(x),w(Le),w(Ae))},t.\u0275cmp=C({type:t,selectors:[["app-play"]],standalone:!0,features:[E],decls:5,vars:4,consts:[[1,"container","mt-5","overflow-auto"],[4,"ngIf"],[3,"round","roundIndex","roundTitle","moveToNextRound"]],template:function(i,s){i&1&&(c(0,"div",0),S(1,It,2,3,"div",1)(2,kt,3,2,"div",1)(3,Bt,3,2,"div",1)(4,At,3,0,"div",1),l()),i&2&&(a(1),d("ngIf",s.currentRound<=2),a(1),d("ngIf",s.currentRound==3),a(1),d("ngIf",s.currentRound==4),a(1),d("ngIf",s.currentRound>4))},dependencies:[A,se,W,Qe,Ye,Ke]});let n=t;return n})();var Xn=[{path:"",component:Je}];export{Xn as default};
